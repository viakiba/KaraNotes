<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="haust.vk.dao.ArticleDao" >
	<insert id="insertArticleabstract" parameterType="haust.vk.entity.Articleabstract">
		insert into articleabstract(article_id,article_title,article_show_img,classify_id,abstract_content,user_id,article_attachment) 
				values(#{article_id},#{article_title},#{article_show_img},#{classify_id},#{abstract_content},#{user_id},#{article_attachment})
	</insert>
	
	<insert id="insertArticlecontent" parameterType="java.util.Map">
		insert into articlecontent(article_id,article_content) values(#{article_id},#{article_content})
	</insert>
	
	<insert id="insertArticletag" parameterType="haust.vk.entity.Articletag">
		insert into articletag(article_id,user_id,tag_content) values(#{article_id},#{user_id},#{tag_content})
	</insert>
	
	<delete id="deleteArticleabstract" parameterType="string">
		delete from articleabstract where article_id = #{article_id}
	</delete>
	
	<delete id="deleteArticlecontent" parameterType="string">
		delete from articleabstract where article_id = #{article_id}
	</delete>
	
	<delete id="deleteArticletag" parameterType="string">
		delete from articleabstract where article_id = #{article_id}
	</delete>
	
	<update id="updateArticletag" parameterType="haust.vk.entity.Articletag">
		update articletag set tag_content=#{tag_content} where article_id = #{article_id}
	</update>
	
	<update id="updateArticleClassify" parameterType="java.util.Map">
		update articleabstract set classify_id=#{classify_id_new} where classify_id = #{classify_id_old}
	</update>
	
	<update id="updateArticleabstract" parameterType="haust.vk.entity.Articleabstract">
		update 
			articleabstract 
		set 
			article_title=#{article_title},article_show_img=#{article_show_img},
			classify_id=#{classify_id},abstract_content=#{abstract_content},
			article_update_time=#{article_update_time}
		where 
			article_id = #{article_id}
	</update>
	
	<update id="updateArticleabstractAtta" parameterType="java.util.Map">
		update articleabstract set article_attachment = #{article_attachment} where article_id = #{article_id}
	</update>
	
	<update id="updateArticlecontent" parameterType="java.util.Map">
		update articlecontent set article_content = #{article_content} where article_id = #{article_id}
	</update>
	
	<select id="selectArticleLikeTitle" parameterType="string" resultType="java.util.Map">
		select 
			article_id,article_title,article_update_time 
		from 
			articleabstract
		where
			article_title LIKE %#{article_title}%
		LIMIT
			#{START},#{END}
	</select>
	
	<select id="selectArticleListByPerson" parameterType="string" resultType="haust.vk.entity.Articleabstract">
		select 
			article_id,article_title,article_update_time 
		from 
			articleabstract
		where
			article_title LIKE %#{article_title}%
		LIMIT
			#{START},#{END}
	</select>
	
	<select id="selectArticleDetail" parameterType="string" resultType="java.util.Map">
		select 
			articleabstract.* ,articleclassify.classify_content,articletag.tag_content 
		from 
			articleabstract,articleclassify,articlecontent,articletag 
		where
			articleabstract.article_id = #{articleid}ssssssss
	</select>
</mapper>